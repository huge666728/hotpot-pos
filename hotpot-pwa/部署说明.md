# 🍲 火锅收银台 PWA 部署指南

## 文件清单

```
hotpot-pwa/
├── index.html      # 主页面（包含所有功能）
├── manifest.json   # PWA配置文件
├── sw.js          # Service Worker（离线支持）
├── icon-192.png   # 应用图标 192x192
└── icon-512.png   # 应用图标 512x512
```

---

## 部署方式

### 方式一：GitHub Pages（免费，推荐新手）

#### 步骤：

1. **注册GitHub账号**
   - 访问 https://github.com 注册

2. **创建新仓库**
   - 点击右上角 "+" → "New repository"
   - 仓库名填写：`hotpot-pos`
   - 选择 "Public"
   - 点击 "Create repository"

3. **上传文件**
   - 点击 "uploading an existing file"
   - 将 `hotpot-pwa` 文件夹内的所有文件拖入
   - 点击 "Commit changes"

4. **启用GitHub Pages**
   - 进入仓库 → Settings → Pages
   - Source 选择 "main" 分支
   - 点击 Save

5. **访问您的应用**
   - 等待1-2分钟
   - 访问：`https://你的用户名.github.io/hotpot-pos`

---

### 方式二：Vercel（免费，速度快）

#### 步骤：

1. **注册Vercel**
   - 访问 https://vercel.com
   - 使用GitHub账号登录

2. **部署项目**
   - 点击 "Add New..." → "Project"
   - 选择 "Import Git Repository" 或直接上传文件夹
   - 点击 "Deploy"

3. **获取访问地址**
   - 部署完成后会得到类似 `xxx.vercel.app` 的地址

---

### 方式三：Netlify（免费，操作简单）

#### 步骤：

1. **注册Netlify**
   - 访问 https://www.netlify.com
   - 注册账号

2. **拖拽部署**
   - 登录后进入控制台
   - 直接将 `hotpot-pwa` 文件夹拖入页面
   - 等待部署完成

3. **获取访问地址**
   - 自动生成类似 `xxx.netlify.app` 的地址
   - 可在设置中自定义域名

---

### 方式四：自有服务器

如果您有自己的服务器（阿里云、腾讯云等）：

#### Nginx配置：

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    # 重定向到HTTPS（PWA需要HTTPS）
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl;
    server_name your-domain.com;
    
    # SSL证书配置
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    root /var/www/hotpot-pwa;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # 缓存静态资源
    location ~* \.(png|ico|json|js)$ {
        expires 30d;
        add_header Cache-Control "public, immutable";
    }
}
```

#### 上传文件：

```bash
# 使用scp上传
scp -r hotpot-pwa/* user@your-server:/var/www/hotpot-pwa/

# 或使用宝塔面板直接上传
```

---

## 重要提示

### ⚠️ HTTPS是必需的

PWA的离线功能和"添加到主屏幕"功能**必须使用HTTPS**！

- GitHub Pages / Vercel / Netlify 默认提供HTTPS ✅
- 自有服务器需要配置SSL证书（可用 Let's Encrypt 免费获取）

### 📱 如何添加到手机桌面

**iPhone (Safari)：**
1. 用Safari打开网站
2. 点击底部分享按钮 ⬆️
3. 选择"添加到主屏幕"

**Android (Chrome)：**
1. 用Chrome打开网站
2. 点击右上角菜单 ⋮
3. 选择"添加到主屏幕"
4. 或者等待自动弹出安装提示

---

## 功能说明

### 已实现功能

| 功能 | 说明 |
|------|------|
| ✅ 自动计算 | 蘸水=人数×3，素菜=人数×10 |
| ✅ 折扣计算 | 仅锅底/蘸水/素菜/肉参与折扣 |
| ✅ 数据存储 | 使用localStorage本地保存 |
| ✅ 订单筛选 | 今天/本周/本月/全部 |
| ✅ CSV导出 | 导出Excel可打开的CSV文件 |
| ✅ 离线使用 | Service Worker缓存支持 |
| ✅ 价格设置 | 可自定义蘸水/素菜单价 |
| ✅ 响应式设计 | 手机/平板/电脑都能用 |

### 数据安全提示

⚠️ 数据存储在浏览器本地，以下情况会丢失数据：
- 清除浏览器缓存/数据
- 卸载浏览器
- 使用无痕/隐私模式

**建议：定期导出CSV备份！**

---

## 自定义修改

### 修改单价

打开 `index.html`，找到设置页面的默认值：

```javascript
let settings = {
    saucePrice: 3,      // 修改蘸水单价
    veggiesPrice: 10,   // 修改素菜单价
    shopName: '火锅店'   // 修改店铺名称
};
```

### 修改主题颜色

在CSS变量部分修改：

```css
:root {
    --primary: #d63031;        /* 主色调（红色） */
    --primary-light: #e17055;  /* 浅主色 */
    --accent: #ff6b6b;         /* 强调色 */
    --bg-dark: #1a1a2e;        /* 背景深色 */
}
```

### 添加新的消费项目

在HTML中添加新的输入框，在JavaScript的calculate()函数中添加计算逻辑。

---

## 常见问题

### Q: 为什么"添加到主屏幕"没有出现？

A: 确保：
1. 使用HTTPS访问
2. 使用Safari(iOS)或Chrome(Android)
3. 已正确配置manifest.json

### Q: 数据能同步到其他设备吗？

A: 当前版本数据存储在本地，不支持多设备同步。如需此功能，需要：
1. 搭建后端服务器
2. 添加用户登录功能
3. 使用云数据库

### Q: 能打印小票吗？

A: 当前版本不支持。如需此功能，可以：
1. 添加蓝牙打印机SDK
2. 或升级为微信小程序版本

---

## 技术支持

如有问题，可以：
1. 在GitHub仓库提Issue
2. 根据本指南自行排查
3. 联系开发者

祝您生意兴隆！🎉
